@model HabitAqui.ViewModels.ListUsersViewModel

<div class="container-fluid pt-3 justify-content-center d-flex align-items-center" style="background-color:#D8D8D8">
    <div>
        <label>Carregue no botão para o qual deseja ver os utilizadores registados</label>
        <p>
            <a class="btn btn-dark mt-3" data-toggle="collapse" href="#multiCollapseExample1" role="button" aria-expanded="false" aria-controls="multiCollapseExample1">Gestores</a>
            <button class="btn btn-dark mt-3" type="button" data-toggle="collapse" data-target="#multiCollapseExample2" aria-expanded="false" aria-controls="multiCollapseExample2">Funcionários</button>
            <button class="btn btn-dark mt-3" type="button" data-toggle="collapse" data-target="#multiCollapseExample3" aria-expanded="false" aria-controls="multiCollapseExample3">Clientes</button>
            <button class="btn btn-dark mt-3" type="button" data-toggle="collapse" data-target="#multiCollapseExample4" aria-expanded="false" aria-controls="multiCollapseExample4">Administradores</button>
        </p>
    </div>
</div>

<div id="multiCollapseExample1" class="collapse multi-collapse">
    
    <div class="card-body">
        <h3>Gestores<a asp-area="Identity" asp-page="/Account/RegisterGestor" class="btn btn-link">Criar Novo</a></h3>
        <hr />
        <div class="row">
            @if (Model.Gestores.Any())
            {
                @foreach (var gestor in Model.Gestores)
                {
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">@gestor.Nome</h5>
                                <p class="card-text">ID: @gestor.GestorId</p>
                                <p class="card-text">Email: @gestor.ApplicationUser.Email</p>
                                <p class="card-text">Locador: @gestor.Locador.Nome</p>
                                <div class="d-flex justify-content-between mt-3">
                                    <a asp-action="Delete" asp-controller="Gestores" asp-route-id="@gestor.GestorId" class="btn btn-danger">Apagar</a>
                                    <a asp-action="Edit" asp-controller="Gestores" asp-route-id="@gestor.GestorId" class="btn btn-secondary">Editar</a>
                                    @if (gestor.ApplicationUser.Ativo)
                                    {
                                        <a asp-action="Desativar" asp-controller="Gestores" asp-route-id="@gestor.ApplicationUser.Id" class="btn btn-dark">Desativar</a>
                                    }
                                    else
                                    {
                                        <a asp-action="Ativar" asp-controller="Gestores" asp-route-id="@gestor.ApplicationUser.Id" class="btn btn-success">Ativar</a>
                                    }

                                </div>
                            </div>
                        </div>
                    </div>
                }

            }
            else
            {
                <p class="alert alert-warning">
                    Não há nenhum gestor disponivel!
                </p>
            }
            
        </div>
    </div>
</div>
<div id="multiCollapseExample2" class="collapse multi-collapse">
    <div class="card-body">
        <h3>Funcionários <a asp-area="Identity" asp-page="/Account/RegisterFunc" class="btn btn-link">Criar Novo</a></h3>
        <hr />
        <div class="row">
            @if (Model.Funcionarios.Any())
            {
                @foreach (var funcionario in Model.Funcionarios)
                {
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">@funcionario.Nome</h5>
                                <p class="card-text">ID: @funcionario.FuncionarioId</p>
                                <p class="card-text">Email: @funcionario.ApplicationUser.Email</p>
                                <p class="card-text">Locador: @funcionario.Locador.Nome</p>
                                <div class="d-flex justify-content-between mt-3">
                                    <a asp-action="Delete" asp-controller="Funcionarios" asp-route-id="@funcionario.FuncionarioId" class="btn btn-danger">Apagar</a>
                                    <a asp-action="Edit" asp-controller="Funcionarios" asp-route-id="@funcionario.FuncionarioId" class="btn btn-secondary">Editar</a>
                                    @if (funcionario.ApplicationUser.Ativo)
                                    {
                                        <a asp-action="Desativar" asp-controller="Gestores" asp-route-id="@funcionario.ApplicationUser.Id" class="btn btn-dark">Desativar</a>
                                    }
                                    else
                                    {
                                        <a asp-action="Ativar" asp-controller="Gestores" asp-route-id="@funcionario.ApplicationUser.Id" class="btn btn-success">Ativar</a>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }

            }
            else
            {
                <p class="alert alert-warning">
                    Não há nenhum funcionário disponivel!
                </p>
            }
            
        </div>
    </div>
</div>

<div id="multiCollapseExample3" class="collapse multi-collapse">
    <div class="card-body">
        <h3>Clientes <a asp-area="Identity" asp-page="/Account/RegisterClient" class="btn btn-link">Criar Novo</a></h3>
        <hr />
        <div class="row">
            @if (Model.Clientes.Any())
            {
                @foreach (var cliente in Model.Clientes)
                {
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">@cliente.Nome</h5>
                                <p class="card-text">Email: @cliente.ApplicationUser.Email</p>
                                <div class="d-flex justify-content-between mt-3">
                                    <a asp-action="Delete" asp-controller="Clientes" asp-route-id="@cliente.ClienteId" class="btn btn-danger">Apagar</a>
                                    <a asp-action="Edit" asp-controller="Clientes" asp-route-id="@cliente.ClienteId" class="btn btn-secondary">Editar</a>
                                    @if (cliente.ApplicationUser.Ativo)
                                    {
                                        <a asp-action="Desativar" asp-controller="Gestores" asp-route-id="@cliente.ApplicationUser.Id" class="btn btn-dark">Desativar</a>
                                    }
                                    else
                                    {
                                        <a asp-action="Ativar" asp-controller="Gestores" asp-route-id="@cliente.ApplicationUser.Id" class="btn btn-success">Ativar</a>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }

            }
            else
            {
                <p class="alert alert-warning">
                    Não há nenhum cliente disponivel!
                </p>
            }
            
        </div>
    </div>
</div>

<div id="multiCollapseExample4" class="collapse multi-collapse">
    <div class="card-body">
        <h3>Administradores <a asp-area="Identity" asp-page="/Account/RegisterAdministrador" class="btn btn-link">Criar Novo</a></h3>
        <hr />
        <div class="row">
            @foreach (var admin in Model.Administradores)
            {
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">@admin.Name</h5>
                            <p class="card-text">Email: @admin.ApplicationUser.Email</p>
                            <div class="d-flex justify-content-between mt-3">
                                @if (User.Identity.IsAuthenticated && User.Identity.Name != admin.ApplicationUser.UserName)
                                {
                                    <a asp-action="Delete" asp-controller="Administradores" asp-route-id="@admin.AdministradorId" class="btn btn-danger">Apagar</a>
                                    <a asp-action="Edit" asp-controller="Administradores" asp-route-id="@admin.AdministradorId" class="btn btn-secondary">Editar</a>
                                    @if (admin.ApplicationUser.Ativo)
                                    {
                                        <a asp-action="Desativar" asp-controller="Gestores" asp-route-id="@admin.ApplicationUser.Id" class="btn btn-dark">Desativar</a>
                                    }
                                    else
                                    {
                                        <a asp-action="Ativar" asp-controller="Gestores" asp-route-id="@admin.ApplicationUser.Id" class="btn btn-success">Ativar</a>
                                    }
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>